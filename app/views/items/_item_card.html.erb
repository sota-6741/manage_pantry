<%#
# Locals:
#   item: The item to display
#   highlight: Boolean to indicate if the card should be highlighted (e.g., expiring soon)
%>
<div class="bg-white rounded-lg shadow-sm border <%= highlight ? 'border-red-400' : 'border-gray-100' %>">
  <div class="flex flex-col gap-3 p-4 border-l-4 <%= highlight ? 'border-red-400' : 'border-transparent' %>">

    <%# Item Name %>
    <h3 class="text-zinc-900 text-lg font-medium leading-7"><%= item.name %></h3>

    <div class="flex flex-col gap-2 w-full">
      <%# Category %>
      <div class="flex items-center gap-2">
        <%= image_tag 'tag_icon.png', size: '16x16', alt: 'Category' %>
        <span class="text-gray-600 text-sm"><%= item.category&.name || "-" %></span>
      </div>

      <%# Stock and Actions %>
      <div class="bg-gray-50 rounded-lg flex items-center justify-between h-14 px-3">
        <div class="flex items-center gap-2">
          <%= image_tag 'stock_icon.png', size: '20x20', alt: 'Stock' %>
          <span class="text-gray-800 text-lg font-bold"><%= item.quantity %></span> <%# Using item.quantity as per controller %>
        </div>
        
        <%= button_to item_stock_adjustments_path(item, stock_adjustment: { amount: 1, reason: "purchase" }), method: :post, class: "bg-green-500 rounded-lg h-8 px-3 flex items-center justify-center gap-1 text-white text-sm font-medium transition active:scale-95" do %>
          <%= image_tag 'edit_icon.png', size: '16x16', alt: 'Edit' %>
          <span>変更</span>
        <% end %>
      </div>

      <%# Expiration Date %>
      <div class="flex items-center gap-2">
        <%= image_tag 'expiration_date_icon.png', size: '16x16', alt: 'Expires' %>
        <span class="text-sm <%= highlight ? 'text-red-500 font-medium' : 'text-gray-600' %>">
          <%= item.expiration_date&.strftime("%Y-%m-%d") %>
        </span>
      </div>
    </div>
  </div>
</div>
